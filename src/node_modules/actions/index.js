import {
    FETCH_GOODS_START,
    FETCH_GOODS_SUCCESS,
    FETCH_GOODS_FAILURE,
    FETCH_CATEGORIES_START,
    FETCH_CATEGORIES_SUCCESS,
    FETCH_CATEGORIES_FAILURE,
    ADD_GOOD_TO_BASKET,
    DELETE_FROM_BASKET
} from 'actionType';
import {
    fetchGoods as fetchGoodsApi,
    fetchCategories as fetchCategoriesApi
} from 'api';

export const fetchGoods = () => async dispatch => {
    dispatch({
        type : FETCH_GOODS_START
    });
    try {
        const goods = await fetchGoodsApi();
        dispatch({
            type : FETCH_GOODS_SUCCESS,
            payload : goods
        })

    }catch(err) {
        dispatch({
            type : FETCH_GOODS_FAILURE,
            payload : err,
            error : true
        })
    }
};

export const fetchCategories = () => async dispatch => {
    dispatch({
        type : FETCH_CATEGORIES_START
    });
    try{
        const categories = await fetchCategoriesApi();
        dispatch({
            type : FETCH_CATEGORIES_SUCCESS,
            payload : categories
        })
    }
    catch(err) {
        dispatch({
            type : FETCH_CATEGORIES_FAILURE,
            payload : err,
            error : true
        })
    }
};
export const addGoodToBasket = (goodId) => (dispatch) => {
    dispatch({
        type : ADD_GOOD_TO_BASKET,
        payload : goodId
    })
};
export const deleteFromBasket = (id) => (dispatch) => {
    dispatch({
        type : DELETE_FROM_BASKET,
        payload : id
    })
}